<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>login</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</head>
<body>
    <form action="/mypage" id="form_mypage" method="post">
        <input type="hidden" name="id" >
    </form>
    <form action="" id="login_form">
        <input type="text" name="id" id="id"  placeholder="id">
        <input type="password" name="pw" id="pw" placeholder="password">
        <button type="button" onclick="login()">로그인</button>
            </button>
    </form>
    
    <script>
        function login(){
           var form = document.querySelector('#login_form');
           let user = {
            id: form.id.value,
            pw: form.pw.value,
           } ;

           if( !id.value && !pw.value){
                alert("빈칸을 입력하세요");
            }
           axios({
             method: "post",
             url: "/login",
             data: user
           }).then((req)=>{
            {return req.data}
           })
           .then((data)=>{
                if(data == true){
                    console.log(data)
                    alert("로그인 접속 성공");
                    var form_mypage =document.querySelector('#form_mypage')
                        form_mypage.id.value = id.value;
                        form_mypage.submit();
                    location.href = "/mypage"
                     
                }else {
                    alert("로그인 접속 실패");
                    id.value = "";
                    pw.value = "";
                }
            })
    }
            
        
    </script>
</body>
</html>